2024-05-14 10:59:42.369 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 10:59:42.421 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 10:59:42.424 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 10:59:42.425 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 10:59:42.445 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-14 10:59:42.460 +07:00 [INF] Applying migration '20240514035919_InitImage'.
2024-05-14 10:59:42.497 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240514035919_InitImage', N'8.0.4');
2024-05-14 11:00:36.567 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 11:00:36.680 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 11:00:36.681 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 11:00:36.684 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 11:00:36.685 +07:00 [INF] Hosting environment: Development
2024-05-14 11:00:36.687 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 11:00:37.232 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 11:00:37.401 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 170.623ms
2024-05-14 11:00:37.422 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 11:00:37.422 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 11:00:37.434 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.5087ms
2024-05-14 11:00:37.453 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.8797ms
2024-05-14 11:00:38.132 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7000/api/Image - null null
2024-05-14 11:00:38.152 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 11:00:38.161 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 11:00:38.834 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 11:00:38.937 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 102.7609ms
2024-05-14 11:00:39.035 +07:00 [ERR] Failed executing DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 11:00:39.054 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'BookPublisher.Data.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Images'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:19379d81-8bcf-49aa-831c-c70ff869428b
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Images'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:19379d81-8bcf-49aa-831c-c70ff869428b
Error Number:208,State:1,Class:16
2024-05-14 11:00:39.064 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 900.2423ms
2024-05-14 11:00:39.066 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 11:00:39.068 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Images'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at BookPublisher.Controllers.ImageController.GetAll() in D:\API\BookPublisher\Controllers\ImageController.cs:line 27
   at lambda_method2(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:19379d81-8bcf-49aa-831c-c70ff869428b
Error Number:208,State:1,Class:16
2024-05-14 11:00:39.101 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7000/api/Image - 500 null text/plain; charset=utf-8 969.1616ms
2024-05-14 12:34:51.082 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 12:34:51.136 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 12:34:51.138 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 12:34:51.139 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 12:34:51.151 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-14 12:34:51.158 +07:00 [INF] Applying migration '20240514053406_Init image'.
2024-05-14 12:34:51.180 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240514053406_Init image', N'8.0.4');
2024-05-14 12:36:10.118 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 12:36:10.158 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 12:36:10.160 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 12:36:10.160 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 12:36:10.171 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-14 12:36:10.181 +07:00 [INF] Applying migration '20240514053559_InitImage'.
2024-05-14 12:36:10.233 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [author] (
    [Id] int NOT NULL IDENTITY,
    [IdList] int NULL,
    [Name] nvarchar(max) NULL,
    CONSTRAINT [PK_author] PRIMARY KEY ([Id])
);
2024-05-14 12:36:51.999 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 12:36:52.036 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 12:36:52.038 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 12:36:52.039 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 12:36:52.049 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-14 12:36:52.056 +07:00 [INF] Applying migration '20240514053559_InitImage'.
2024-05-14 12:36:52.105 +07:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [author] (
    [Id] int NOT NULL IDENTITY,
    [IdList] int NULL,
    [Name] nvarchar(max) NULL,
    CONSTRAINT [PK_author] PRIMARY KEY ([Id])
);
2024-05-14 12:37:13.358 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 12:37:13.392 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 12:37:13.394 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 12:37:13.395 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 12:37:13.405 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-14 12:37:13.412 +07:00 [INF] Applying migration '20240514053559_InitImage'.
2024-05-14 12:37:13.462 +07:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [author] (
    [Id] int NOT NULL IDENTITY,
    [IdList] int NULL,
    [Name] nvarchar(max) NULL,
    CONSTRAINT [PK_author] PRIMARY KEY ([Id])
);
2024-05-14 12:38:07.276 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 12:38:07.312 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 12:38:07.314 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 12:38:07.314 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 12:38:07.324 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-14 12:38:07.333 +07:00 [INF] Applying migration '20240514053559_InitImage'.
2024-05-14 12:38:07.380 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [author] (
    [Id] int NOT NULL IDENTITY,
    [IdList] int NULL,
    [Name] nvarchar(max) NULL,
    CONSTRAINT [PK_author] PRIMARY KEY ([Id])
);
2024-05-14 12:38:07.382 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AuthorDTO] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    CONSTRAINT [PK_AuthorDTO] PRIMARY KEY ([Id])
);
2024-05-14 12:38:07.383 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BookWithAuthorAndPublisherDTO] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [isRead] bit NULL,
    [DateRead] date NULL,
    [Rate] int NULL,
    [Genre] int NULL,
    [Url] nvarchar(max) NULL,
    [DateAdd] datetime2 NOT NULL,
    [PublisherName] nvarchar(max) NULL,
    [AuthorName] nvarchar(max) NULL,
    CONSTRAINT [PK_BookWithAuthorAndPublisherDTO] PRIMARY KEY ([Id])
);
2024-05-14 12:38:07.383 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Images] (
    [Id] int NOT NULL IDENTITY,
    [FileName] nvarchar(max) NULL,
    [StoredFileName] nvarchar(max) NULL,
    CONSTRAINT [PK_Images] PRIMARY KEY ([Id])
);
2024-05-14 12:38:07.384 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [publishers] (
    [Id] int NOT NULL IDENTITY,
    [BookId] int NULL,
    [Name] nvarchar(max) NULL,
    CONSTRAINT [PK_publishers] PRIMARY KEY ([Id])
);
2024-05-14 12:38:07.385 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [books] (
    [Id] int NOT NULL IDENTITY,
    [IdList] int NOT NULL,
    [Title] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [IsRead] bit NULL,
    [DateRead] date NULL,
    [Rate] int NULL,
    [Genre] int NULL,
    [CoverUrl] nvarchar(max) NULL,
    [DateAdd] datetime2 NULL,
    [PublisherId] int NULL,
    [PublishersId] int NULL,
    CONSTRAINT [PK_books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_books_publishers_PublishersId] FOREIGN KEY ([PublishersId]) REFERENCES [publishers] ([Id])
);
2024-05-14 12:38:07.387 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [book_authors] (
    [Id] int NOT NULL IDENTITY,
    [idbook] int NULL,
    [idauthor] int NULL,
    CONSTRAINT [PK_book_authors] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_book_authors_author_idauthor] FOREIGN KEY ([idauthor]) REFERENCES [author] ([Id]),
    CONSTRAINT [FK_book_authors_books_idbook] FOREIGN KEY ([idbook]) REFERENCES [books] ([Id])
);
2024-05-14 12:38:07.394 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'IdList', N'Name') AND [object_id] = OBJECT_ID(N'[author]'))
    SET IDENTITY_INSERT [author] ON;
INSERT INTO [author] ([Id], [IdList], [Name])
VALUES (1, 1, N'Võ Hoàng Việt'),
(2, 2, N'Nguyễn Phạm Phương Linh');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'IdList', N'Name') AND [object_id] = OBJECT_ID(N'[author]'))
    SET IDENTITY_INSERT [author] OFF;
2024-05-14 12:38:07.402 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CoverUrl', N'DateAdd', N'DateRead', N'Description', N'Genre', N'IdList', N'IsRead', N'PublisherId', N'PublishersId', N'Rate', N'Title') AND [object_id] = OBJECT_ID(N'[books]'))
    SET IDENTITY_INSERT [books] ON;
INSERT INTO [books] ([Id], [CoverUrl], [DateAdd], [DateRead], [Description], [Genre], [IdList], [IsRead], [PublisherId], [PublishersId], [Rate], [Title])
VALUES (1, N'Hello', '2004-01-28T15:00:00.0000000', '2024-04-15', N'Chưa biết', 17, 0, CAST(0 AS bit), 1, NULL, 4, N'Sách hay'),
(2, N'Hello', '2004-01-28T15:00:00.0000000', '2024-04-15', N'Chưa biết', 17, 0, CAST(0 AS bit), 1, NULL, 3, N'Sách hay');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CoverUrl', N'DateAdd', N'DateRead', N'Description', N'Genre', N'IdList', N'IsRead', N'PublisherId', N'PublishersId', N'Rate', N'Title') AND [object_id] = OBJECT_ID(N'[books]'))
    SET IDENTITY_INSERT [books] OFF;
2024-05-14 12:38:07.696 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'BookId', N'Name') AND [object_id] = OBJECT_ID(N'[publishers]'))
    SET IDENTITY_INSERT [publishers] ON;
INSERT INTO [publishers] ([Id], [BookId], [Name])
VALUES (1, 1, N'NoName');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'BookId', N'Name') AND [object_id] = OBJECT_ID(N'[publishers]'))
    SET IDENTITY_INSERT [publishers] OFF;
2024-05-14 12:38:07.705 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'idauthor', N'idbook') AND [object_id] = OBJECT_ID(N'[book_authors]'))
    SET IDENTITY_INSERT [book_authors] ON;
INSERT INTO [book_authors] ([Id], [idauthor], [idbook])
VALUES (1, 1, 1),
(2, 2, 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'idauthor', N'idbook') AND [object_id] = OBJECT_ID(N'[book_authors]'))
    SET IDENTITY_INSERT [book_authors] OFF;
2024-05-14 12:38:07.708 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_book_authors_idauthor] ON [book_authors] ([idauthor]);
2024-05-14 12:38:07.710 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_book_authors_idbook] ON [book_authors] ([idbook]);
2024-05-14 12:38:07.712 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_books_PublishersId] ON [books] ([PublishersId]);
2024-05-14 12:38:07.714 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240514053559_InitImage', N'8.0.4');
2024-05-14 12:38:27.204 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 12:38:27.665 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 12:38:27.668 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 12:38:27.670 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 12:38:27.671 +07:00 [INF] Hosting environment: Development
2024-05-14 12:38:27.672 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 12:38:28.236 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 12:38:28.435 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 200.2642ms
2024-05-14 12:38:28.526 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 12:38:28.526 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 12:38:28.534 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.0751ms
2024-05-14 12:38:28.570 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.6831ms
2024-05-14 12:38:29.063 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 12:38:29.170 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 106.9009ms
2024-05-14 12:38:33.522 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 12:38:34.161 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:38:34.172 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 12:38:35.213 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 12:38:35.225 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 12:38:35.230 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 1054.9197ms
2024-05-14 12:38:35.232 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:38:35.238 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 1715.5719ms
2024-05-14 12:38:44.236 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7000/api/Image - multipart/form-data; boundary=----WebKitFormBoundarycfbJpqPCAxQD7nWs 186882
2024-05-14 12:38:44.257 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher)'
2024-05-14 12:38:44.266 +07:00 [INF] Route matched with {action = "Uploadfile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[BookPublisher.Models.UploadResult]]] Uploadfile(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 12:38:44.448 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Images] ([FileName], [StoredFileName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-05-14 12:38:44.469 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 12:38:44.471 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher) in 202.6293ms
2024-05-14 12:38:44.473 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher)'
2024-05-14 12:38:44.476 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 240.0505ms
2024-05-14 12:38:47.551 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 12:38:47.555 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:38:47.556 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 12:38:47.595 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 12:38:47.600 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 12:38:47.602 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 44.4013ms
2024-05-14 12:38:47.603 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:38:47.604 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 52.9709ms
2024-05-14 12:38:55.886 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7000/api/Image - null null
2024-05-14 12:38:55.889 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:38:55.889 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 12:38:55.891 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 12:38:55.893 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 12:38:55.894 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 3.9221ms
2024-05-14 12:38:55.896 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:38:55.897 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 10.4296ms
2024-05-14 12:42:28.857 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 12:42:29.016 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 12:42:29.021 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 12:42:29.023 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 12:42:29.025 +07:00 [INF] Hosting environment: Development
2024-05-14 12:42:29.026 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 12:42:29.225 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 12:42:29.355 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 130.9991ms
2024-05-14 12:42:29.366 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 12:42:29.372 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.0705ms
2024-05-14 12:42:29.450 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 12:42:29.475 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.7637ms
2024-05-14 12:42:30.033 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7000/api/Image - null null
2024-05-14 12:42:30.054 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:42:30.062 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 12:42:30.447 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 12:42:30.540 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 92.4764ms
2024-05-14 12:42:30.862 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 12:42:31.019 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 12:42:31.026 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 960.8565ms
2024-05-14 12:42:31.027 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:42:31.034 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 1000.794ms
2024-05-14 12:43:09.571 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 12:43:09.578 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:43:09.579 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 12:43:09.592 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 12:43:09.597 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 12:43:09.598 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 16.6611ms
2024-05-14 12:43:09.600 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:43:09.601 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 29.5766ms
2024-05-14 12:55:01.628 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 12:55:01.726 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 12:55:01.729 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 12:55:01.731 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 12:55:01.732 +07:00 [INF] Hosting environment: Development
2024-05-14 12:55:01.733 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 12:55:01.949 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 12:55:02.060 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 111.4019ms
2024-05-14 12:55:02.196 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 12:55:02.202 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.8965ms
2024-05-14 12:55:02.210 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 12:55:02.238 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.4278ms
2024-05-14 12:55:03.259 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 12:55:03.376 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 117.0884ms
2024-05-14 12:55:13.177 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 12:55:13.200 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:55:13.211 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 12:55:13.957 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 12:55:13.970 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 12:55:13.977 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 761.7182ms
2024-05-14 12:55:13.979 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:55:13.986 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 809.5856ms
2024-05-14 12:55:23.027 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7000/api/Image - multipart/form-data; boundary=----WebKitFormBoundaryxZdA32iIAOBVghpi 445933
2024-05-14 12:55:23.032 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher)'
2024-05-14 12:55:23.042 +07:00 [INF] Route matched with {action = "Uploadfile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[BookPublisher.Models.UploadResult]]] Uploadfile(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 12:55:23.147 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Images] ([FileName], [StoredFileName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-05-14 12:55:23.166 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Images] ([FileName], [StoredFileName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-05-14 12:55:23.171 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 12:55:23.175 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher) in 131.3494ms
2024-05-14 12:55:23.177 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher)'
2024-05-14 12:55:23.180 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 152.227ms
2024-05-14 12:55:26.773 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 12:55:26.776 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:55:26.777 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 12:55:26.819 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 12:55:26.824 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 12:55:26.825 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 46.7231ms
2024-05-14 12:55:26.827 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 12:55:26.828 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 55.5147ms
2024-05-14 12:56:31.798 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 12:56:31.896 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 12:56:31.897 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 12:56:31.899 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 12:56:31.900 +07:00 [INF] Hosting environment: Development
2024-05-14 12:56:31.900 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 12:56:32.084 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 12:56:32.207 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 123.1415ms
2024-05-14 12:56:32.219 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 12:56:32.219 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 12:56:32.226 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.0907ms
2024-05-14 12:56:32.241 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.4974ms
2024-05-14 12:56:33.391 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 12:56:33.479 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "GET api/Image" for actions - BookPublisher.Controllers.ImageController.GetAll (BookPublisher),BookPublisher.Controllers.ImageController.Download (BookPublisher). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 12:56:33.492 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 100.4389ms
2024-05-14 13:03:36.003 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 13:03:36.041 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 13:03:36.043 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-14 13:03:36.043 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-14 13:03:36.053 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-14 13:03:36.061 +07:00 [INF] Applying migration '20240514060324_ContentType'.
2024-05-14 13:03:36.093 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Images] ADD [ContentType] nvarchar(max) NULL;
2024-05-14 13:03:36.094 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240514060324_ContentType', N'8.0.4');
2024-05-14 13:03:39.570 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:03:39.677 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:03:39.678 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:03:39.680 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:03:39.680 +07:00 [INF] Hosting environment: Development
2024-05-14 13:03:39.681 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:03:39.990 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:03:40.111 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 120.2537ms
2024-05-14 13:03:40.121 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:03:40.121 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:03:40.128 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.0426ms
2024-05-14 13:03:40.143 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.175ms
2024-05-14 13:03:41.071 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:03:41.142 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "GET api/Image" for actions - BookPublisher.Controllers.ImageController.GetAll (BookPublisher),BookPublisher.Controllers.ImageController.Download (BookPublisher). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:03:41.151 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 79.593ms
2024-05-14 13:03:50.872 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:03:50.975 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:03:50.977 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:03:50.979 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:03:50.980 +07:00 [INF] Hosting environment: Development
2024-05-14 13:03:50.981 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:03:51.403 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:03:51.516 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 114.8348ms
2024-05-14 13:03:51.608 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:03:51.608 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:03:51.617 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.1734ms
2024-05-14 13:03:51.640 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.1976ms
2024-05-14 13:03:52.253 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:03:52.331 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "GET api/Image" for actions - BookPublisher.Controllers.ImageController.GetAll (BookPublisher),BookPublisher.Controllers.ImageController.Download (BookPublisher). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:03:52.342 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 89.3789ms
2024-05-14 13:05:36.774 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:05:37.263 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:05:37.264 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:05:37.267 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:05:37.268 +07:00 [INF] Hosting environment: Development
2024-05-14 13:05:37.268 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:05:37.687 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:05:37.899 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 216.524ms
2024-05-14 13:05:38.019 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:05:38.020 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:05:38.040 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 21.2024ms
2024-05-14 13:05:38.254 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 194.3159ms
2024-05-14 13:05:38.995 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:05:39.641 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "GET api/Image" for actions - BookPublisher.Controllers.ImageController.GetAll (BookPublisher),BookPublisher.Controllers.ImageController.Download (BookPublisher). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:05:39.697 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 702.3568ms
2024-05-14 13:07:33.226 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:07:33.319 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:07:33.322 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:07:33.323 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:07:33.324 +07:00 [INF] Hosting environment: Development
2024-05-14 13:07:33.325 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:07:33.592 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:07:33.709 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 117.276ms
2024-05-14 13:07:33.812 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:07:33.813 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:07:33.821 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.5627ms
2024-05-14 13:07:33.845 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.5156ms
2024-05-14 13:07:34.378 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:07:34.501 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 123.0854ms
2024-05-14 13:07:39.013 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:07:39.042 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:07:39.055 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:07:39.914 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:07:39.953 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:07:39.962 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 900.3056ms
2024-05-14 13:07:39.963 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:07:39.971 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 957.1572ms
2024-05-14 13:07:45.974 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/2 - null null
2024-05-14 13:07:45.980 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:07:45.986 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:07:45.998 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:07:46.004 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 16.2584ms
2024-05-14 13:07:46.006 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:07:46.008 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/2 - 404 null application/problem+json; charset=utf-8 33.9572ms
2024-05-14 13:07:52.169 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/2.png - null null
2024-05-14 13:07:52.175 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:07:52.177 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:07:52.181 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:07:52.182 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 3.4013ms
2024-05-14 13:07:52.183 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:07:52.184 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/2.png - 404 null application/problem+json; charset=utf-8 14.4719ms
2024-05-14 13:08:13.475 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/2.png - null null
2024-05-14 13:08:13.481 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:08:13.482 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:08:13.490 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:08:13.492 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 8.4578ms
2024-05-14 13:08:13.493 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:08:13.494 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/2.png - 404 null application/problem+json; charset=utf-8 18.6301ms
2024-05-14 13:08:14.042 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/favicon.ico - null null
2024-05-14 13:08:14.045 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/favicon.ico - 404 0 null 2.9487ms
2024-05-14 13:08:14.048 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7000/favicon.ico, Response status code: 404
2024-05-14 13:09:07.102 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:09:07.107 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 4.4851ms
2024-05-14 13:09:07.125 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:09:07.125 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:09:07.129 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 3.9361ms
2024-05-14 13:09:07.135 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.5536ms
2024-05-14 13:09:08.111 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:09:08.121 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.3351ms
2024-05-14 13:09:16.822 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:09:16.825 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:09:16.825 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:09:16.837 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:09:16.840 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:09:16.841 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 14.3617ms
2024-05-14 13:09:16.841 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:09:16.842 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 20.5521ms
2024-05-14 13:09:31.938 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7000/api/Image - multipart/form-data; boundary=----WebKitFormBoundarynB7Ml7dnhfbY1Wpq 792249
2024-05-14 13:09:31.940 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher)'
2024-05-14 13:09:31.947 +07:00 [INF] Route matched with {action = "Uploadfile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[BookPublisher.Models.UploadResult]]] Uploadfile(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:09:32.072 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Images] ([ContentType], [FileName], [StoredFileName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-05-14 13:09:32.091 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Images] ([ContentType], [FileName], [StoredFileName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-05-14 13:09:32.097 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Images] ([ContentType], [FileName], [StoredFileName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-05-14 13:09:32.101 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Images] ([ContentType], [FileName], [StoredFileName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-05-14 13:09:32.104 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:09:32.107 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher) in 158.4036ms
2024-05-14 13:09:32.108 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher)'
2024-05-14 13:09:32.112 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 174.2846ms
2024-05-14 13:09:36.554 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:09:36.560 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:09:36.563 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:09:36.566 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:09:36.567 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:09:36.568 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 3.5551ms
2024-05-14 13:09:36.569 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:09:36.570 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 16.4955ms
2024-05-14 13:09:55.338 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/1.png - null null
2024-05-14 13:09:55.343 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:09:55.344 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:09:55.346 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:09:55.347 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 1.3802ms
2024-05-14 13:09:55.348 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:09:55.349 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/1.png - 404 null application/problem+json; charset=utf-8 11.1125ms
2024-05-14 13:13:15.122 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:13:15.228 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:13:15.230 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:13:15.231 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:13:15.232 +07:00 [INF] Hosting environment: Development
2024-05-14 13:13:15.233 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:13:15.410 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:13:15.527 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 117.8033ms
2024-05-14 13:13:15.540 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:13:15.540 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:13:15.545 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.5054ms
2024-05-14 13:13:15.562 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.6644ms
2024-05-14 13:13:16.677 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:13:16.786 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 108.4445ms
2024-05-14 13:13:21.233 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:13:21.277 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:13:21.291 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:13:22.050 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:13:22.084 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:13:22.090 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 795.2581ms
2024-05-14 13:13:22.091 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:13:22.097 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 863.648ms
2024-05-14 13:13:30.147 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/1.png - null null
2024-05-14 13:13:30.153 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:13:30.160 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:13:30.268 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[FileName] = @__filename_0
2024-05-14 13:13:30.278 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:13:30.287 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 125.403ms
2024-05-14 13:13:30.288 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:13:30.290 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/1.png - 404 null application/problem+json; charset=utf-8 142.3726ms
2024-05-14 13:13:53.320 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/1.png - null null
2024-05-14 13:13:53.670 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:13:53.672 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:13:53.779 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[FileName] = @__filename_0
2024-05-14 13:13:53.795 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:13:53.797 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 122.6432ms
2024-05-14 13:13:53.798 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:13:53.800 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/1.png - 404 null application/problem+json; charset=utf-8 480.2431ms
2024-05-14 13:14:00.288 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7000/api/Image/download/1.png - null null
2024-05-14 13:14:00.292 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:14:00.294 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:14:00.298 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[FileName] = @__filename_0
2024-05-14 13:14:00.300 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:14:00.302 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 5.6438ms
2024-05-14 13:14:00.303 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:14:00.304 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7000/api/Image/download/1.png - 404 null application/problem+json; charset=utf-8 15.2641ms
2024-05-14 13:17:34.210 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:17:34.315 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:17:34.316 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:17:34.320 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:17:34.324 +07:00 [INF] Hosting environment: Development
2024-05-14 13:17:34.325 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:17:34.500 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:17:34.620 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 120.7775ms
2024-05-14 13:17:34.637 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:17:34.637 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:17:34.645 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.3833ms
2024-05-14 13:17:34.662 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.7979ms
2024-05-14 13:17:35.869 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:17:36.007 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 137.5124ms
2024-05-14 13:17:42.597 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/1.png - null null
2024-05-14 13:17:42.621 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:17:42.635 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:17:43.571 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[FileName] = @__filename_0
2024-05-14 13:17:43.609 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 970.4663ms
2024-05-14 13:17:43.612 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:17:43.617 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.FileNotFoundException: Could not find file 'D:\API\BookPublisher\Images\1.png'.
File name: 'D:\API\BookPublisher\Images\1.png'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 64
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:17:43.648 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/1.png - 500 null text/plain; charset=utf-8 1050.729ms
2024-05-14 13:17:55.069 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/1 - null null
2024-05-14 13:17:55.160 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:17:55.164 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:17:55.210 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[FileName] = @__filename_0
2024-05-14 13:17:55.216 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 49.1239ms
2024-05-14 13:17:55.218 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:17:55.221 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.FileNotFoundException: Could not find file 'D:\API\BookPublisher\Images\1'.
File name: 'D:\API\BookPublisher\Images\1'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 64
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:17:55.237 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/1 - 500 null text/plain; charset=utf-8 168.354ms
2024-05-14 13:17:58.958 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:17:58.966 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:17:58.969 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:17:59.051 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:17:59.062 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:17:59.067 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 94.1413ms
2024-05-14 13:17:59.069 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:17:59.070 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 111.9748ms
2024-05-14 13:18:27.203 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7000/api/Image - multipart/form-data; boundary=----WebKitFormBoundaryaB6Y9GlSquA84Og3 145
2024-05-14 13:18:27.228 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher)'
2024-05-14 13:18:27.235 +07:00 [INF] Route matched with {action = "Uploadfile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[BookPublisher.Models.UploadResult]]] Uploadfile(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:18:27.246 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:18:27.247 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher) in 9.8808ms
2024-05-14 13:18:27.248 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher)'
2024-05-14 13:18:27.249 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 45.3993ms
2024-05-14 13:18:33.116 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:18:33.118 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:18:33.119 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:18:33.126 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:18:33.130 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:18:33.132 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 11.5148ms
2024-05-14 13:18:33.133 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:18:33.134 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 18.8861ms
2024-05-14 13:19:27.124 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:19:27.271 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:19:27.273 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:19:27.275 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:19:27.276 +07:00 [INF] Hosting environment: Development
2024-05-14 13:19:27.277 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:19:27.826 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:19:27.986 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 161.0894ms
2024-05-14 13:19:27.999 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:19:27.999 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:19:28.008 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.6302ms
2024-05-14 13:19:28.027 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.7782ms
2024-05-14 13:19:28.780 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:19:28.955 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 174.8441ms
2024-05-14 13:19:35.282 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:19:35.306 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:19:35.314 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:19:36.044 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:19:36.081 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:19:36.088 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 770.9534ms
2024-05-14 13:19:36.089 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:19:36.096 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 813.5841ms
2024-05-14 13:19:41.152 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7000/api/Image - null null
2024-05-14 13:19:41.156 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:19:41.157 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:19:41.171 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:19:41.173 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:19:41.176 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 17.9589ms
2024-05-14 13:19:41.177 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:19:41.178 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 26.2815ms
2024-05-14 13:19:50.844 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7000/api/Image?id=4 - null null
2024-05-14 13:19:50.849 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:19:50.855 +07:00 [INF] Route matched with {action = "Del", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Del(Int32) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:19:50.978 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[Id] = @__id_0
2024-05-14 13:19:51.022 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Images]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-14 13:19:51.028 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:19:51.036 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Del (BookPublisher) in 178.9214ms
2024-05-14 13:19:51.038 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:19:51.039 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7000/api/Image?id=4 - 400 null application/problem+json; charset=utf-8 194.7023ms
2024-05-14 13:19:51.874 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7000/api/Image?id=5 - null null
2024-05-14 13:19:51.876 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:19:51.877 +07:00 [INF] Route matched with {action = "Del", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Del(Int32) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:19:51.908 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[Id] = @__id_0
2024-05-14 13:19:51.913 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Images]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-14 13:19:51.917 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:19:51.918 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Del (BookPublisher) in 15.7549ms
2024-05-14 13:19:51.920 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:19:51.921 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7000/api/Image?id=5 - 400 null application/problem+json; charset=utf-8 46.6288ms
2024-05-14 13:19:52.834 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7000/api/Image?id=6 - null null
2024-05-14 13:19:52.836 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:19:52.837 +07:00 [INF] Route matched with {action = "Del", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Del(Int32) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:19:52.840 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[Id] = @__id_0
2024-05-14 13:19:52.845 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Images]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-14 13:19:52.847 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:19:52.848 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Del (BookPublisher) in 9.6203ms
2024-05-14 13:19:52.849 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:19:52.850 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7000/api/Image?id=6 - 400 null application/problem+json; charset=utf-8 15.4214ms
2024-05-14 13:19:53.651 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7000/api/Image?id=7 - null null
2024-05-14 13:19:53.653 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:19:53.654 +07:00 [INF] Route matched with {action = "Del", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Del(Int32) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:19:53.658 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[Id] = @__id_0
2024-05-14 13:19:53.663 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Images]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-14 13:19:53.665 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:19:53.667 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Del (BookPublisher) in 12.1955ms
2024-05-14 13:19:53.668 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:19:53.670 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7000/api/Image?id=7 - 400 null application/problem+json; charset=utf-8 19.1604ms
2024-05-14 13:19:55.459 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7000/api/Image - null null
2024-05-14 13:19:55.461 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:19:55.461 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:19:55.465 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:19:55.466 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:19:55.467 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 4.014ms
2024-05-14 13:19:55.468 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:19:55.469 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 10.5983ms
2024-05-14 13:20:01.220 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:20:01.222 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:20:01.223 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:20:01.225 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:20:01.226 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:20:01.227 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 3.6916ms
2024-05-14 13:20:01.228 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:20:01.231 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 10.5614ms
2024-05-14 13:20:08.797 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/22 - null null
2024-05-14 13:20:08.800 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:20:08.804 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:20:08.831 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[FileName] = @__filename_0
2024-05-14 13:20:08.839 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 33.579ms
2024-05-14 13:20:08.840 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:20:08.843 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.FileNotFoundException: Could not find file 'D:\API\BookPublisher\Images\22'.
File name: 'D:\API\BookPublisher\Images\22'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 64
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:20:08.863 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/22 - 500 null text/plain; charset=utf-8 66.3939ms
2024-05-14 13:20:16.048 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7000/api/Image/download/22 - null null
2024-05-14 13:20:16.050 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:20:16.050 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:20:16.054 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[FileName] = @__filename_0
2024-05-14 13:20:16.055 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 3.5984ms
2024-05-14 13:20:16.056 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:20:16.057 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.FileNotFoundException: Could not find file 'D:\API\BookPublisher\Images\22'.
File name: 'D:\API\BookPublisher\Images\22'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 64
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:20:16.064 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7000/api/Image/download/22 - 500 null text/plain; charset=utf-8 15.9443ms
2024-05-14 13:20:50.306 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:20:50.408 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:20:50.409 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:20:50.411 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:20:50.411 +07:00 [INF] Hosting environment: Development
2024-05-14 13:20:50.412 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:20:50.702 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:20:50.808 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 106.9195ms
2024-05-14 13:20:50.819 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:20:50.819 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:20:50.826 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.9212ms
2024-05-14 13:20:50.842 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.9471ms
2024-05-14 13:20:51.982 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:20:52.084 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 102.2664ms
2024-05-14 13:21:05.043 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/0e4p0rli.uju - null null
2024-05-14 13:21:05.083 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:21:05.097 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:21:05.900 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:21:05.925 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 824.412ms
2024-05-14 13:21:05.926 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:21:05.928 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:21:05.951 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/0e4p0rli.uju - 500 null text/plain; charset=utf-8 907.4287ms
2024-05-14 13:21:22.866 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:21:22.873 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 6.6683ms
2024-05-14 13:21:22.893 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:21:22.893 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:21:22.896 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 2.6892ms
2024-05-14 13:21:22.905 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.4581ms
2024-05-14 13:21:23.916 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:21:23.931 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 14.9729ms
2024-05-14 13:21:38.874 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7000/api/Image - multipart/form-data; boundary=----WebKitFormBoundaryMdBRl3BNa6TBe2ft 620319
2024-05-14 13:21:38.881 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher)'
2024-05-14 13:21:38.889 +07:00 [INF] Route matched with {action = "Uploadfile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[BookPublisher.Models.UploadResult]]] Uploadfile(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:21:39.015 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Images] ([ContentType], [FileName], [StoredFileName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-05-14 13:21:39.036 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Images] ([ContentType], [FileName], [StoredFileName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-05-14 13:21:39.040 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Images] ([ContentType], [FileName], [StoredFileName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-05-14 13:21:39.047 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:21:39.052 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher) in 161.6111ms
2024-05-14 13:21:39.053 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher)'
2024-05-14 13:21:39.055 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 180.669ms
2024-05-14 13:22:07.761 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:22:07.765 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:22:07.768 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:22:07.815 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:22:07.820 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:22:07.821 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 51.5584ms
2024-05-14 13:22:07.822 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:22:07.823 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 62.1343ms
2024-05-14 13:22:16.675 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:22:16.771 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:22:16.772 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:22:16.773 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:22:16.774 +07:00 [INF] Hosting environment: Development
2024-05-14 13:22:16.775 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:22:16.987 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:22:17.137 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 150.5713ms
2024-05-14 13:22:17.151 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:22:17.151 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:22:17.157 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.0029ms
2024-05-14 13:22:17.184 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.2298ms
2024-05-14 13:22:17.756 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:22:17.903 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 146.8843ms
2024-05-14 13:22:25.228 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/1 - null null
2024-05-14 13:22:25.253 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:22:25.268 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:22:26.051 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:22:26.070 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 798.1427ms
2024-05-14 13:22:26.071 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:22:26.073 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.FileNotFoundException: Could not find file 'D:\API\BookPublisher\Images\1'.
File name: 'D:\API\BookPublisher\Images\1'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 64
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:22:26.097 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/1 - 500 null text/plain; charset=utf-8 869.5094ms
2024-05-14 13:22:34.328 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/1.png - null null
2024-05-14 13:22:34.333 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:22:34.334 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:22:34.350 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:22:34.352 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 16.0541ms
2024-05-14 13:22:34.353 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:22:34.354 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.FileNotFoundException: Could not find file 'D:\API\BookPublisher\Images\1.png'.
File name: 'D:\API\BookPublisher\Images\1.png'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 64
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:22:34.362 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/1.png - 500 null text/plain; charset=utf-8 33.5145ms
2024-05-14 13:22:41.048 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:22:41.053 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:22:41.056 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:22:41.107 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:22:41.134 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:22:41.137 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 78.539ms
2024-05-14 13:22:41.137 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:22:41.138 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 89.9651ms
2024-05-14 13:22:46.328 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - null null
2024-05-14 13:22:46.331 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:22:46.332 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:22:46.337 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:22:46.340 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 6.9232ms
2024-05-14 13:22:46.342 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:22:46.344 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: The header contains invalid values at index 0: '2.png'
   at Microsoft.Net.Http.Headers.HttpHeaderParser`1.ParseValue(StringSegment value, Int32& index)
   at Microsoft.Net.Http.Headers.MediaTypeHeaderValue.Parse(StringSegment input)
   at Microsoft.AspNetCore.Mvc.ControllerBase.File(Stream fileStream, String contentType, String fileDownloadName)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:22:46.349 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - 500 null text/plain; charset=utf-8 21.4793ms
2024-05-14 13:22:52.298 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - null null
2024-05-14 13:22:52.301 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:22:52.302 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:22:52.306 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:22:52.309 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 5.2182ms
2024-05-14 13:22:52.310 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:22:52.311 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: The header contains invalid values at index 0: '2.png'
   at Microsoft.Net.Http.Headers.HttpHeaderParser`1.ParseValue(StringSegment value, Int32& index)
   at Microsoft.Net.Http.Headers.MediaTypeHeaderValue.Parse(StringSegment input)
   at Microsoft.AspNetCore.Mvc.ControllerBase.File(Stream fileStream, String contentType, String fileDownloadName)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:22:52.316 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - 500 null text/plain; charset=utf-8 18.3373ms
2024-05-14 13:23:57.954 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:23:58.047 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:23:58.050 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:23:58.053 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:23:58.054 +07:00 [INF] Hosting environment: Development
2024-05-14 13:23:58.055 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:23:58.265 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:23:58.395 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 130.9954ms
2024-05-14 13:23:58.409 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:23:58.409 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:23:58.416 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.0814ms
2024-05-14 13:23:58.430 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.5372ms
2024-05-14 13:23:59.485 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:23:59.596 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 110.5783ms
2024-05-14 13:24:02.983 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - null null
2024-05-14 13:24:03.003 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:24:03.016 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:24:03.796 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:24:03.841 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 819.4822ms
2024-05-14 13:24:03.843 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:24:03.846 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: The header contains invalid values at index 0: '2.png'
   at Microsoft.Net.Http.Headers.HttpHeaderParser`1.ParseValue(StringSegment value, Int32& index)
   at Microsoft.Net.Http.Headers.MediaTypeHeaderValue.Parse(StringSegment input)
   at Microsoft.AspNetCore.Mvc.ControllerBase.File(Stream fileStream, String contentType, String fileDownloadName)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:24:03.868 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - 500 null text/plain; charset=utf-8 885.3019ms
2024-05-14 13:24:12.106 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:24:12.110 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:24:12.114 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:24:12.134 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:24:12.139 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:24:12.142 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 26.4092ms
2024-05-14 13:24:12.144 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:24:12.145 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 39.2211ms
2024-05-14 13:24:17.455 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/2 - null null
2024-05-14 13:24:17.461 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:24:17.462 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:24:17.502 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:24:17.504 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 39.9725ms
2024-05-14 13:24:17.505 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:24:17.506 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.FileNotFoundException: Could not find file 'D:\API\BookPublisher\Images\2'.
File name: 'D:\API\BookPublisher\Images\2'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 64
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:24:17.514 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/2 - 500 null text/plain; charset=utf-8 58.8276ms
2024-05-14 13:24:25.358 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - null null
2024-05-14 13:24:25.361 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:24:25.363 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:24:25.368 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[ContentType], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:24:25.370 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 5.2371ms
2024-05-14 13:24:25.371 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:24:25.372 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: The header contains invalid values at index 0: '2.png'
   at Microsoft.Net.Http.Headers.HttpHeaderParser`1.ParseValue(StringSegment value, Int32& index)
   at Microsoft.Net.Http.Headers.MediaTypeHeaderValue.Parse(StringSegment input)
   at Microsoft.AspNetCore.Mvc.ControllerBase.File(Stream fileStream, String contentType, String fileDownloadName)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:24:25.378 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - 500 null text/plain; charset=utf-8 19.8605ms
2024-05-14 13:24:54.786 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:24:54.879 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:24:54.880 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:24:54.882 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:24:54.882 +07:00 [INF] Hosting environment: Development
2024-05-14 13:24:54.883 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:24:55.112 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:24:55.238 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 126.9799ms
2024-05-14 13:24:55.250 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:24:55.250 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:24:55.256 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.8593ms
2024-05-14 13:24:55.270 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.5667ms
2024-05-14 13:24:55.764 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:24:55.913 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 148.8131ms
2024-05-14 13:24:58.975 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:24:58.998 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:24:59.011 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:24:59.742 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:24:59.773 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:24:59.781 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 764.0667ms
2024-05-14 13:24:59.782 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:24:59.789 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 813.8741ms
2024-05-14 13:25:08.799 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - null null
2024-05-14 13:25:08.803 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:25:08.812 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:25:08.900 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:25:08.912 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 98.502ms
2024-05-14 13:25:08.913 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:25:08.916 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: The header contains invalid values at index 0: '2.png'
   at Microsoft.Net.Http.Headers.HttpHeaderParser`1.ParseValue(StringSegment value, Int32& index)
   at Microsoft.Net.Http.Headers.MediaTypeHeaderValue.Parse(StringSegment input)
   at Microsoft.AspNetCore.Mvc.ControllerBase.File(Stream fileStream, String contentType, String fileDownloadName)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:25:08.934 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - 500 null text/plain; charset=utf-8 135.0035ms
2024-05-14 13:25:17.067 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7000/api/Image?id=8 - null null
2024-05-14 13:25:17.073 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:25:17.077 +07:00 [INF] Route matched with {action = "Del", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Del(Int32) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:25:17.127 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[Id] = @__id_0
2024-05-14 13:25:17.175 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Images]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-14 13:25:17.182 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:25:17.189 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Del (BookPublisher) in 109.8622ms
2024-05-14 13:25:17.190 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:25:17.191 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7000/api/Image?id=8 - 400 null application/problem+json; charset=utf-8 123.9475ms
2024-05-14 13:25:18.523 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7000/api/Image?id=9 - null null
2024-05-14 13:25:18.527 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:25:18.533 +07:00 [INF] Route matched with {action = "Del", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Del(Int32) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:25:18.547 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[Id] = @__id_0
2024-05-14 13:25:18.552 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Images]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-14 13:25:18.558 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:25:18.559 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Del (BookPublisher) in 25.1115ms
2024-05-14 13:25:18.561 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:25:18.563 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7000/api/Image?id=9 - 400 null application/problem+json; charset=utf-8 40.1751ms
2024-05-14 13:25:23.986 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7000/api/Image?id=10 - null null
2024-05-14 13:25:23.991 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:25:23.992 +07:00 [INF] Route matched with {action = "Del", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Del(Int32) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:25:23.996 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[Id] = @__id_0
2024-05-14 13:25:24.003 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Images]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-14 13:25:24.005 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:25:24.006 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Del (BookPublisher) in 11.8162ms
2024-05-14 13:25:24.008 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:25:24.009 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7000/api/Image?id=10 - 400 null application/problem+json; charset=utf-8 23.4575ms
2024-05-14 13:25:29.136 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:25:29.139 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:25:29.140 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:25:29.143 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:25:29.146 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:25:29.147 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 5.0435ms
2024-05-14 13:25:29.148 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:25:29.150 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 13.138ms
2024-05-14 13:25:34.901 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - null null
2024-05-14 13:25:34.905 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:25:34.906 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:25:34.910 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:25:34.912 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 5.1966ms
2024-05-14 13:25:34.913 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:25:34.914 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:25:34.920 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - 500 null text/plain; charset=utf-8 19.0823ms
2024-05-14 13:25:35.155 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - null null
2024-05-14 13:25:35.159 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:25:35.160 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:25:35.163 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:25:35.166 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 4.7247ms
2024-05-14 13:25:35.166 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:25:35.167 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:25:35.173 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - 500 null text/plain; charset=utf-8 17.8626ms
2024-05-14 13:25:35.333 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - null null
2024-05-14 13:25:35.337 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:25:35.338 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:25:35.342 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:25:35.344 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 4.0225ms
2024-05-14 13:25:35.344 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:25:35.345 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:25:35.349 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - 500 null text/plain; charset=utf-8 15.62ms
2024-05-14 13:25:35.484 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - null null
2024-05-14 13:25:35.487 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:25:35.488 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:25:35.493 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:25:35.495 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 3.6257ms
2024-05-14 13:25:35.496 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:25:35.496 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:25:35.501 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - 500 null text/plain; charset=utf-8 17.5213ms
2024-05-14 13:25:35.631 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - null null
2024-05-14 13:25:35.652 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:25:35.653 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:25:35.658 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:25:35.660 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 5.3843ms
2024-05-14 13:25:35.661 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:25:35.662 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:25:35.666 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/xdbzcsdy.dgo - 500 null text/plain; charset=utf-8 35.3766ms
2024-05-14 13:27:15.223 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:27:15.313 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:27:15.315 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:27:15.318 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:27:15.318 +07:00 [INF] Hosting environment: Development
2024-05-14 13:27:15.319 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:27:15.519 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:27:15.640 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 121.316ms
2024-05-14 13:27:15.653 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:27:15.653 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:27:15.660 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.6724ms
2024-05-14 13:27:15.679 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.4655ms
2024-05-14 13:27:16.768 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:27:16.872 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 104.7402ms
2024-05-14 13:27:21.816 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:27:21.840 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:27:21.849 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:27:22.629 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:27:22.646 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:27:22.652 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 797.3994ms
2024-05-14 13:27:22.653 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:27:22.660 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 843.8089ms
2024-05-14 13:27:35.945 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7000/api/Image - multipart/form-data; boundary=----WebKitFormBoundaryTgZqLhCKZrM2aZWg 445933
2024-05-14 13:27:35.955 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher)'
2024-05-14 13:27:35.972 +07:00 [INF] Route matched with {action = "Uploadfile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[BookPublisher.Models.UploadResult]]] Uploadfile(System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:27:36.255 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Images] ([FileName], [StoredFileName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-05-14 13:27:36.295 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Images] ([FileName], [StoredFileName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-05-14 13:27:36.302 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:27:36.307 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher) in 332.5679ms
2024-05-14 13:27:36.310 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Uploadfile (BookPublisher)'
2024-05-14 13:27:36.315 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 369.2391ms
2024-05-14 13:27:42.593 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:27:42.597 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:27:42.598 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:27:42.642 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:27:42.646 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:27:42.648 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 47.8676ms
2024-05-14 13:27:42.649 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:27:42.651 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 57.645ms
2024-05-14 13:27:56.427 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7000/api/Image?id=12 - null null
2024-05-14 13:27:56.430 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:27:56.434 +07:00 [INF] Route matched with {action = "Del", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Del(Int32) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:27:56.497 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[Id] = @__id_0
2024-05-14 13:27:56.531 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Images]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-14 13:27:56.539 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-14 13:27:56.550 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.Del (BookPublisher) in 114.0636ms
2024-05-14 13:27:56.554 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.Del (BookPublisher)'
2024-05-14 13:27:56.555 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7000/api/Image?id=12 - 400 null application/problem+json; charset=utf-8 127.7429ms
2024-05-14 13:28:00.343 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:28:00.346 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:28:00.347 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:28:00.351 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:28:00.353 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:28:00.354 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 5.5645ms
2024-05-14 13:28:00.355 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:28:00.356 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 13.5859ms
2024-05-14 13:28:40.403 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/louiksrp.ooa - null null
2024-05-14 13:28:40.405 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:28:40.409 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:28:40.443 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:28:40.454 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 42.4259ms
2024-05-14 13:28:40.455 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:28:40.457 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: The header contains invalid values at index 0: '1.png'
   at Microsoft.Net.Http.Headers.HttpHeaderParser`1.ParseValue(StringSegment value, Int32& index)
   at Microsoft.Net.Http.Headers.MediaTypeHeaderValue.Parse(StringSegment input)
   at Microsoft.AspNetCore.Mvc.ControllerBase.File(Stream fileStream, String contentType, String fileDownloadName)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:28:40.475 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/louiksrp.ooa - 500 null text/plain; charset=utf-8 72.5301ms
2024-05-14 13:34:24.715 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:34:24.817 +07:00 [INF] Now listening on: https://localhost:7000
2024-05-14 13:34:24.818 +07:00 [INF] Now listening on: http://localhost:5079
2024-05-14 13:34:24.820 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-14 13:34:24.821 +07:00 [INF] Hosting environment: Development
2024-05-14 13:34:24.822 +07:00 [INF] Content root path: D:\API\BookPublisher
2024-05-14 13:34:25.024 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/index.html - null null
2024-05-14 13:34:25.147 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 123.7711ms
2024-05-14 13:34:25.159 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_vs/browserLink - null null
2024-05-14 13:34:25.159 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:34:25.166 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.1353ms
2024-05-14 13:34:25.180 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.7757ms
2024-05-14 13:34:26.116 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - null null
2024-05-14 13:34:26.242 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.4783ms
2024-05-14 13:34:30.506 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image - null null
2024-05-14 13:34:30.535 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:34:30.547 +07:00 [INF] Route matched with {action = "GetAll", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:34:31.369 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
2024-05-14 13:34:31.403 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookPublisher.Models.UploadResult, BookPublisher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:34:31.409 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.GetAll (BookPublisher) in 857.1672ms
2024-05-14 13:34:31.410 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.GetAll (BookPublisher)'
2024-05-14 13:34:31.415 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image - 200 null application/json; charset=utf-8 908.6845ms
2024-05-14 13:34:38.073 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/1.png - null null
2024-05-14 13:34:38.078 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:34:38.086 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:34:38.183 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:34:38.195 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 107.3644ms
2024-05-14 13:34:38.196 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:34:38.198 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.FileNotFoundException: Could not find file 'D:\API\BookPublisher\Images\1.png'.
File name: 'D:\API\BookPublisher\Images\1.png'
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 64
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:34:38.219 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/1.png - 500 null text/plain; charset=utf-8 146.4764ms
2024-05-14 13:34:45.599 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7000/api/Image/download/louiksrp.ooa - null null
2024-05-14 13:34:45.627 +07:00 [INF] Executing endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:34:45.629 +07:00 [INF] Route matched with {action = "DownloadFile", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.String) on controller BookPublisher.Controllers.ImageController (BookPublisher).
2024-05-14 13:34:45.677 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__filename_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[FileName], [i].[StoredFileName]
FROM [Images] AS [i]
WHERE [i].[StoredFileName] = @__filename_0
2024-05-14 13:34:45.681 +07:00 [INF] Executed action BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher) in 51.2616ms
2024-05-14 13:34:45.683 +07:00 [INF] Executed endpoint 'BookPublisher.Controllers.ImageController.DownloadFile (BookPublisher)'
2024-05-14 13:34:45.685 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: The header contains invalid values at index 0: 'louiksrp.ooa'
   at Microsoft.Net.Http.Headers.HttpHeaderParser`1.ParseValue(StringSegment value, Int32& index)
   at Microsoft.Net.Http.Headers.MediaTypeHeaderValue.Parse(StringSegment input)
   at Microsoft.AspNetCore.Mvc.ControllerBase.File(Stream fileStream, String contentType, String fileDownloadName)
   at BookPublisher.Controllers.ImageController.DownloadFile(String filename) in D:\API\BookPublisher\Controllers\ImageController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-14 13:34:45.691 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7000/api/Image/download/louiksrp.ooa - 500 null text/plain; charset=utf-8 91.4686ms
